## 3.1 知识图谱构建子系统详细设计

### 3.1.1 系统功能概述

知识图谱构建子系统旨在面向海外博物馆中所藏中国文物的信息进行系统化采集、处理与存储，并以结构化方式构建面向开放链接数据的知识图谱。其核心功能模块包括以下四项：

1. **数据爬取模块**
    负责自动化获取海外博物馆网站中的中国文物相关信息，包括文物名称、图片、年代、材质、介绍等内容，并按照预定格式对数据进行保存与组织，确保后续处理环节的数据规范性与完整性。
2. **数据建模模块**
    将爬取到的原始信息转化为知识图谱中通用的三元组结构（主语-谓语-宾语），并以CSV格式存储，导入MySQL数据库；图像资源将统一上传至图床进行管理与引用。
3. **数据补充模块**
    针对初步爬取数据中存在的缺失或不完整项（如文物创作者信息、背景知识等），该模块支持从第三方开放资源（如百度百科）进一步抓取补充数据，或通过人工标注方式完善现有数据体系，提升图谱的知识完整性。
4. **数据存储模块**
    将标准化后的三元组数据导入图数据库（如Neo4j或Virtuoso），用于支持后续的知识可视化、语义查询、图谱分析等多种下游任务。同时，系统支持将构建完成的知识图谱发布为开放链接数据资源，为其他模块或外部系统调用提供支持。

------

### 3.1.2 系统架构设计

知识图谱构建子系统采用模块化设计，整体系统架构如图所示：

![系统架构图](https://github.com/Vanthoci/ChinaHeritageAbroad/assets/167691932/f6564c39-3cca-4d0d-93b0-33d176c07346)

系统由数据采集、处理、建模、补充与存储五个主要子模块组成，模块间通过接口进行解耦协作，形成从原始数据到知识图谱构建的闭环流程。

------

### 3.1.3 接口设计

#### 1. 数据管理接口

- **数据爬取接口**
  - `museumCrawl(urlList)`：接收博物馆网址列表，批量爬取中国文物信息。
  - `supplementalCrawl(keywordList)`：根据缺失字段关键词，从指定开放资源平台（如百科类网站）补充数据。
- **数据处理接口**
  - `dataToTriple(rawData)`：将原始数据格式转化为标准三元组结构。
  - `entityEnhancement(entityList)`：针对特定实体，调用外部数据源补充属性信息。
- **数据存储接口**
  - `saveToGraphDB(tripleData)`：将三元组数据写入图数据库（Neo4j/Virtuoso）。
  - `publishAsLOD()`：对知识图谱进行开放链接数据封装，供外部系统访问与使用。

------

### 3.1.4 数据设计

#### 1. MySQL 数据设计

本部分数据结构与后台管理子系统保持一致，用于原始数据缓存与管理。

#### 2. Neo4j 图数据库设计

- 节点（Nodes）

| 类型         | 字段名称       | 数据类型 | 长度                  | 能否为空 | 能否重复 | 说明                   |
| ------------ | -------------- | -------- | --------------------- | -------- | -------- | ---------------------- |
| 文物节点     | 文物编号       | 数值型   | 15                    | 否       | 否       |                        |
|              | 名称           | 字符型   | 100                   | 否       | 是       | 可视化图中圆圈里面的字 |
|              | 介绍           | 字符型   | 500                   | 是       | 否       |                        |
| 朝代节点     | 朝代名称       | 字符型   | 50                    | 否       | 否       | 可视化图中圆圈里面的字 |
| 作者节点     | 作者名称及介绍 | 字符型   | 100                   | 否       | 否       | 可视化图中圆圈里面的字 |
| 藏品材质节点 | 材质名称       | 字符型   | 50                    | 否       | 否       | 可视化图中圆圈里面的字 |
| 藏品来源节点 | 来源名称       | 枚举型   | 征集购买/接受捐赠等   | 否       | 否       | 可视化图中圆圈里面的字 |
| 藏品等级节点 | 等级名称       | 枚举型   | 一级/二级/三级/未定级 | 否       | 否       | 可视化图中圆圈里面的字 |
| 藏品类型节点 | 类型名称       | 字符型   | 20                    | 否       | 否       | 可视化图中圆圈里面的字 |

- 边（Relationships）

| 关系名称 | 关系类型 | 方向             | 源节点   | 目标节点     | 属性 | 说明             |
| -------- | -------- | ---------------- | -------- | ------------ | ---- | ---------------- |
| 制造于   | 制造于   | 文物 -> 朝代     | 文物节点 | 朝代节点     | 无   | 文物属于某个朝代 |
| 创作者   | 创作者   | 文物 <- 作者     | 文物节点 | 作者节点     | 无   | 文物的作者       |
| 藏品材质 | 藏品材质 | 文物 -> 藏品材质 | 文物节点 | 藏品材质节点 | 无   | 文物的材质       |
| 藏品来源 | 藏品来源 | 文物 -> 藏品来源 | 文物节点 | 藏品来源节点 | 无   | 文物的来源       |
| 藏品等级 | 藏品等级 | 文物 -> 藏品等级 | 文物节点 | 藏品等级节点 | 无   | 文物的等级       |
| 藏品类型 | 藏品类型 | 文物 -> 藏品类型 | 文物节点 | 藏品类型节点 | 无   | 文物的类型       |

### 3.1.5 模块功能设计

各功能模块的逻辑结构如图所示：

![模块功能图](https://github.com/Vanthoci/ChinaHeritageAbroad/assets/167691932/2e0738e4-8b4d-45b7-83d5-8651869ac65f)

- **数据采集模块**：负责网页结构解析、内容提取、图片下载与命名处理。
- **数据建模模块**：完成字段映射、关系抽取、三元组生成。
- **数据补充模块**：自动爬虫与人工校验结合，完善不完整信息。
- **图谱存储模块**：Neo4j驱动接入，实现节点与边的写入操作。

------

### 3.1.6 界面设计

![7343c27d-6cf4-4855-83b9-c62dcc5998ad](https://wangri.oss-cn-beijing.aliyuncs.com/time/202505052230304.png)
